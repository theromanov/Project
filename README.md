# MyPlatform

## ðŸ”Ž ÐœÐµÑ‚Ð° Ð¿Ñ€Ð¾Ñ”ÐºÑ‚Ñƒ
Web-Ð¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼Ð° Ð´Ð»Ñ Ð¿Ñ–Ð´Ñ‚Ñ€Ð¸Ð¼ÐºÐ¸ Ñ‚Ð²Ð¾Ñ€Ñ‡Ð¸Ñ… Ð°Ð²Ñ‚Ð¾Ñ€Ñ–Ð²: ÑÑ‚Ð²Ð¾Ñ€ÐµÐ½Ð½Ñ Ð¾Ð±Ð»Ñ–ÐºÐ¾Ð²Ð¸Ñ… Ð·Ð°Ð¿Ð¸ÑÑ–Ð², Ð¿ÑƒÐ±Ð»Ñ–ÐºÐ°Ñ†Ñ–Ð¹, Ð¿Ñ–Ð´Ð¿Ð¸ÑÐ¾Ðº Ñ‚Ð° Ð¾Ð¿Ð»Ð°Ñ‚ Ñ‡ÐµÑ€ÐµÐ· ÐºÐ»Ñ–Ñ”Ð½Ñ‚ÑÑŒÐºÐ¸Ð¹ Ñ–Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ Ð½Ð° React Ñ‚Ð° ÑÐµÑ€Ð²ÐµÑ€ Ð½Ð° Node.js.

Ð’ÐµÐ±-Ð¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼Ð° Ð´Ð»Ñ Ð¿Ñ–Ð´Ñ‚Ñ€Ð¸Ð¼ÐºÐ¸ Ñ‚Ð²Ð¾Ñ€Ñ‡Ð¸Ñ… Ð°Ð²Ñ‚Ð¾Ñ€Ñ–Ð²:
- Ð ÐµÑ”ÑÑ‚Ñ€Ð°Ñ†Ñ–Ñ Ñ‚Ð° Ð°ÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ñ–ÐºÐ°Ñ†Ñ–Ñ
- Ð¡Ñ‚Ð²Ð¾Ñ€ÐµÐ½Ð½Ñ Ñ‚Ð° ÑƒÐ¿Ñ€Ð°Ð²Ð»Ñ–Ð½Ð½Ñ Ð¿ÑƒÐ±Ð»Ñ–ÐºÐ°Ñ†Ñ–ÑÐ¼Ð¸
- ÐŸÑ–Ð´Ð¿Ð¸ÑÐºÐ¸ Ð½Ð° Ð°Ð²Ñ‚Ð¾Ñ€Ñ–Ð²
- ÐžÐ¿Ð»Ð°Ñ‚Ð° ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚Ñƒ

---

## ðŸ›  Ð¢ÐµÑ…Ð½Ñ–Ñ‡Ð½Ð¸Ð¹ ÑÑ‚ÐµÐº

**Ð¡ÐµÑ€Ð²ÐµÑ€**  
Node.js Â· Express Â· Knex Â· PostgreSQL Â· JWT Â· HTTPS

**ÐšÐ»Ñ–Ñ”Ð½Ñ‚**  
React Â· HTML Â· CSS Â· JavaScript

**Ð†Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð¸**  
VS Code Â· Git Â· Postman

---

## ðŸš€ Ð’ÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ Ñ‚Ð° Ð·Ð°Ð¿ÑƒÑÐº

## ÐšÐ»Ñ–Ñ”Ð½Ñ‚

cd client
npm install
npm start                                   # Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ð¸ React-Ð´Ð¾Ð´Ð°Ñ‚Ð¾Ðº

### Ð¡ÐµÑ€Ð²ÐµÑ€

cd server
npm install
npx knex migrate:latest --env development   # Ð·Ð°ÑÑ‚Ð¾ÑÑƒÐ²Ð°Ñ‚Ð¸ Ð¼Ñ–Ð³Ñ€Ð°Ñ†Ñ–Ñ—
npm start                                   # Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ð¸ HTTPS-ÑÐµÑ€Ð²ÐµÑ€


## ðŸ”— Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ñ–Ñ API

| ÐœÐµÑ‚Ð¾Ð´    | Ð•Ð½Ð´Ð¿Ð¾Ñ–Ð½Ñ‚                         | ÐžÐ¿Ð¸Ñ                                | Ð”Ð¾ÑÑ‚ÑƒÐ¿    |
|:---------|:---------------------------------|:------------------------------------|:----------|
| **POST** | `/api/auth/register`             | Ð ÐµÑ”ÑÑ‚Ñ€Ð°Ñ†Ñ–Ñ (username, password)     | public    |
| **POST** | `/api/auth/login`                | Ð›Ð¾Ð³Ñ–Ð½ â†’ JWT                         | public    |
| **GET**  | `/api/authors`                   | Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð°Ð²Ñ‚Ð¾Ñ€Ñ–Ð²                      | protected |
| **GET**  | `/api/authors/:id`               | ÐÐ²Ñ‚Ð¾Ñ€ Ð¿Ð¾ ID                         | protected |
| **POST** | `/api/authors`                   | Ð¡Ñ‚Ð²Ð¾Ñ€Ð¸Ñ‚Ð¸ Ð°Ð²Ñ‚Ð¾Ñ€Ð°                     | protected |
| **PUT**  | `/api/authors/:id`               | ÐžÐ½Ð¾Ð²Ð¸Ñ‚Ð¸ Ð°Ð²Ñ‚Ð¾Ñ€Ð°                      | protected |
| **DELETE**| `/api/authors/:id`              | Ð’Ð¸Ð´Ð°Ð»Ð¸Ñ‚Ð¸ Ð°Ð²Ñ‚Ð¾Ñ€Ð°                     | protected |
| â€¦        | (Ð°Ð½Ð°Ð»Ð¾Ð³Ñ–Ñ‡Ð½Ð¾ Ð´Ð»Ñ)                 | `/publications`, `/subscriptions`, `/payments` | protected |

### ðŸ” Ð—Ð°Ñ…Ð¸ÑÑ‚ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ñƒ
Ð£ Ð²ÑÑ–Ñ… **protected** Ð·Ð°Ð¿Ð¸Ñ‚Ð°Ñ… Ð½ÐµÐ¾Ð±Ñ…Ñ–Ð´Ð½Ð¾ Ð´Ð¾Ð´Ð°Ñ‚Ð¸ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº:


---

## ðŸ” ÐÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ñ–ÐºÐ°Ñ†Ñ–Ñ (JWT)

1. **Ð ÐµÑ”ÑÑ‚Ñ€Ð°Ñ†Ñ–Ñ**  
   - ÐšÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡ Ð½Ð°Ð´ÑÐ¸Ð»Ð°Ñ” `username` Ñ‚Ð° `password`.  
   - ÐŸÐ°Ñ€Ð¾Ð»ÑŒ Ñ…ÐµÑˆÑƒÑ”Ñ‚ÑŒÑÑ Ð·Ð° Ð´Ð¾Ð¿Ð¾Ð¼Ð¾Ð³Ð¾ÑŽ `bcrypt` Ñ– Ð·Ð±ÐµÑ€Ñ–Ð³Ð°Ñ”Ñ‚ÑŒÑÑ Ð² Ð±Ð°Ð·Ñ–.

2. **Ð›Ð¾Ð³Ñ–Ð½**  
   - ÐŸÐµÑ€ÐµÐ²Ñ–Ñ€ÑÑ”Ð¼Ð¾ ÐºÐ¾Ñ€ÐµÐºÑ‚Ð½Ñ–ÑÑ‚ÑŒ Ð¿Ð°Ñ€Ð¾Ð»Ñ (`bcrypt.compare`).  
   - Ð“ÐµÐ½ÐµÑ€ÑƒÑ”Ð¼Ð¾ JWT Ñ–Ð· ÐºÐ¾Ñ€Ð¸ÑÐ½Ð¸Ð¼ Ð½Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶ÐµÐ½Ð½ÑÐ¼ `{ userId, username }` Ñ‚Ð° ÑÑ‚Ñ€Ð¾ÐºÐ¾Ð¼ Ð¶Ð¸Ñ‚Ñ‚Ñ 2 Ð³Ð¾Ð´Ð¸Ð½Ð¸.

3. **Middleware**  
   - `authMiddleware` Ð·Ñ‡Ð¸Ñ‚ÑƒÑ” Ñ‚Ð¾ÐºÐµÐ½ Ñ–Ð· Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÑƒ `Authorization`.  
   - Ð¯ÐºÑ‰Ð¾ Ñ‚Ð¾ÐºÐµÐ½ Ð²Ð°Ð»Ñ–Ð´Ð½Ð¸Ð¹ â€” Ð´Ð¾Ð´Ð°Ñ” `req.user` Ñ‚Ð° Ð¿ÐµÑ€ÐµÐ´Ð°Ñ” ÑƒÐ¿Ñ€Ð°Ð²Ð»Ñ–Ð½Ð½Ñ Ð´Ð°Ð»Ñ–, Ñ–Ð½Ð°ÐºÑˆÐµ Ð¿Ð¾Ð²ÐµÑ€Ñ‚Ð°Ñ” `401 Unauthorized`.

---

## ðŸ”’ SSL / HTTPS

- **Ð¡ÐµÑ€Ñ‚Ð¸Ñ„Ñ–ÐºÐ°Ñ‚:** `server/cert/cert.pem`  
- **ÐŸÑ€Ð¸Ð²Ð°Ñ‚Ð½Ð¸Ð¹ ÐºÐ»ÑŽÑ‡:** `server/cert/key.pem`



const https = require('https')
const fs    = require('fs')
const app   = require('./app')  // Ð’Ð°Ñˆ Express-Ð´Ð¾Ð´Ð°Ñ‚Ð¾Ðº

const options = {
  key:  fs.readFileSync('cert/key.pem'),
  cert: fs.readFileSync('cert/cert.pem')
}

const PORT = process.env.PORT || 8080

https
  .createServer(options, app)
  .listen(PORT, () => {
    console.log(`HTTPS Server listening on port ${PORT}`)
  })





